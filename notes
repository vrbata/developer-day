PSR standardy, ContainerAware antipatern - service locator



$container = new ContainerBuilder();
$container->getParameterBag()->add($this->getKernelParameters()); // v kernel parametrech se nachází aktivní bunldy, mód aplikace - dev, prod + debug režim a další parametry


foreach ($this->bundles as $bundle) {
	$bundle->build($container); // možnost přidání definic services do containeru - každý bundle si může registrovat vlastní services
}


$container->compile();


v rámci $container->compile se volá metoda
$pass->process($container); // mimo jiné so volá i AutowirePass nebo CheckCircularReferencesPass


$this->parameterBag = new FrozenParameterBag($this->parameterBag->all());
$this->compiled = true;

// není možné měnit definice service nebo měnit parametry


$this->dumpContainer($cache, $container, $class, $this->getContainerBaseClass());




AppBundle\Service\OldService:
    deprecated: The "%service_id%" service is deprecated since 2.8 and will be removed in 3.0.